/* Import Inter from Google Fonts */
@import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap');

/* Import CJK fonts for internationalization */
@import url('https://fonts.googleapis.com/css2?family=Noto+Sans+JP:wght@400;500;700&family=Noto+Sans+SC:wght@400;500;700&display=swap');

/* Import table styles */
@import './table.css';

/* Font Face Declarations */
@font-face {
  font-family: 'Martina Plantijn';
  src: url('/fonts/TestMartinaPlantijn-Light-BF663c36d1dbbe7.otf')
    format('opentype');
  font-weight: 300;
  font-style: normal;
  font-display: swap;
}

@tailwind base;
@tailwind components;
@tailwind utilities;

/* Typography CSS Custom Properties */
:root {
  /* Font Families */
  --font-heading: 'Martina Plantijn', 'Georgia', serif;
  --font-body:
    'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto',
    'Noto Sans SC', 'Noto Sans JP', 'Helvetica Neue', 'Arial', 'PingFang SC',
    'Hiragino Sans GB', 'Microsoft YaHei', 'WenQuanYi Micro Hei', sans-serif;

  /* Font Sizes - Desktop */
  --text-h1: 2.5rem; /* 40px - Main page titles */
  --text-h2: 2rem; /* 32px - Section headers */
  --text-h3: 1.5rem; /* 24px - Subsection headers */
  --text-h4: 1.25rem; /* 20px - Card titles */
  --text-h5: 1.125rem; /* 18px - Small headers */
  --text-h6: 1rem; /* 16px - Tiny headers */

  --text-body-lg: 1.125rem; /* 18px - Large body text */
  --text-body: 1rem; /* 16px - Regular body text */
  --text-body-sm: 0.875rem; /* 14px - Small body text */
  --text-caption: 0.75rem; /* 12px - Captions, labels */
  --text-micro: 0.625rem; /* 10px - Tiny text */

  /* Line Heights */
  --leading-heading: 1.2;
  --leading-body: 1.6;
  --leading-relaxed: 1.75;

  /* Letter Spacing */
  --tracking-heading: -0.02em;
  --tracking-body: 0;
  --tracking-wide: 0.025em;

  /* Font Weights */
  --font-light: 300;
  --font-regular: 400;
  --font-medium: 500;
  --font-semibold: 600;
  --font-bold: 700;
}

/* Navigation active state utility class */
@layer utilities {
  .nav-active {
    background-color: var(--nav-active-bg);
    color: var(--nav-active-text);
  }
}

/* Safe area support for mobile devices with notches */
@layer utilities {
  .h-safe-area-bottom {
    height: env(safe-area-inset-bottom, 0);
  }

  .pb-safe-area-bottom {
    padding-bottom: env(safe-area-inset-bottom, 0);
  }
}

/* Hide scrollbar utilities */
@layer utilities {
  /* Hide scrollbar for Chrome, Safari and Opera */
  .scrollbar-hide::-webkit-scrollbar {
    display: none;
  }

  /* Hide scrollbar for IE, Edge and Firefox */
  .scrollbar-hide {
    -ms-overflow-style: none; /* IE and Edge */
    scrollbar-width: none; /* Firefox */
  }

  /* Styled scrollbar for shape popup */
  .scrollbar-styled {
    scrollbar-width: thin;
    scrollbar-color: #cbd5e1 #f1f1f1;
  }

  .scrollbar-styled::-webkit-scrollbar {
    width: 6px;
  }

  .scrollbar-styled::-webkit-scrollbar-track {
    background: #f1f1f1;
    border-radius: 3px;
  }

  .scrollbar-styled::-webkit-scrollbar-thumb {
    background: #cbd5e1;
    border-radius: 3px;
  }

  .scrollbar-styled::-webkit-scrollbar-thumb:hover {
    background: #94a3b8;
  }

  /* Popup shadow utility class */
  .shadow-popup {
    box-shadow: var(--shadow-popup);
  }
}

/* CSS Custom Properties for Color Palette */
:root {
  /* Active nav item colors */
  --nav-active-bg: #cde8e4;
  --nav-active-text: #017c6e;

  /* Theme colors that adapt between light and dark modes */
  --dark-text: #62615f; /* Gray text in light mode */
  --dark-heading: #191818; /* Black heading in light mode */
  --dark-bg: #f6f5f4; /* Light background in light mode */
  --dark-border: #7e757233; /* Light border in light mode */
  --dark-accent: #017c6e; /* Green accent in light mode */
  /* Light mode color scheme */
  color-scheme: light;
  /* Layout */
  --header-height: 60px;

  /* Border colors */
  --border-gray: #d9d9d9;
  --border-app: #7e757233;

  /* Box Shadows */
  --shadow-primary:
    0px 2.15px 0.5px -2px rgba(0, 0, 0, 0.25),
    0px 24px 24px -16px rgba(8, 8, 8, 0.04), 0px 6px 13px rgba(8, 8, 8, 0.03),
    0px 6px 4px -4px rgba(8, 8, 8, 0.05), 0px 5px 1.5px -4px rgba(8, 8, 8, 0.09);

  /* Popup shadow for dropdowns, menus, and floating elements */
  --shadow-popup: 0 1px 3px 0 rgb(0 0 0 / 0.1), 0 1px 2px -1px rgb(0 0 0 / 0.1);

  /* Text Input Background */
  --color-text-input-bg: #f1f1f1;

  /* Black/Font Color */
  --color-black: #000000;
  --color-black-50: #f9fafb;
  --color-black-100: #f3f4f6;
  --color-black-200: #e5e7eb;
  --color-black-300: #d1d5db;
  --color-black-400: #9ca3af;
  --color-black-500: #6b7280;
  --color-black-600: #4b5563;
  --color-black-700: #374151;
  --color-black-800: #1f2937;
  --color-black-900: #111827;
  --color-black-950: #030712;

  /* White (Background/Card) */
  --color-white: #fafafa;
  --color-white-pure: #ffffff;
  --color-white-50: #ffffff;
  --color-white-100: #fefefe;
  --color-white-200: #fdfdfd;
  --color-white-300: #fcfcfc;
  --color-white-400: #fbfbfb;
  --color-white-500: #fafafa;
  --color-white-600: #f5f5f5;
  --color-white-700: #f0f0f0;
  --color-white-800: #e8e8e8;
  --color-white-900: #e0e0e0;

  /* Light Gray (Secondary Background) */
  --color-light-gray: #f2f2f2;
  --color-light-gray-50: #fafafa;
  --color-light-gray-100: #f7f7f7;
  --color-light-gray-200: #f5f5f5;
  --color-light-gray-300: #f2f2f2;
  --color-light-gray-400: #eeeeee;
  --color-light-gray-500: #e8e8e8;
  --color-light-gray-600: #e0e0e0;
  --color-light-gray-700: #d6d6d6;
  --color-light-gray-800: #cccccc;
  --color-light-gray-900: #bfbfbf;

  /* Gray */
  --color-gray: #d0d0d0;
  --color-gray-50: #f6f6f6;
  --color-gray-100: #eeeeee;
  --color-gray-200: #e5e5e5;
  --color-gray-300: #d9d9d9;
  --color-gray-400: #d0d0d0;
  --color-gray-500: #c4c4c4;
  --color-gray-600: #b8b8b8;
  --color-gray-700: #a8a8a8;
  --color-gray-800: #999999;
  --color-gray-900: #8a8a8a;

  /* Dark Gray */
  --color-dark-gray: #7f7f7f;
  --color-dark-gray-50: #e8e8e8;
  --color-dark-gray-100: #d1d1d1;
  --color-dark-gray-200: #bababa;
  --color-dark-gray-300: #a3a3a3;
  --color-dark-gray-400: #8c8c8c;
  --color-dark-gray-500: #7f7f7f;
  --color-dark-gray-600: #6b6b6b;
  --color-dark-gray-700: #575757;
  --color-dark-gray-800: #434343;
  --color-dark-gray-900: #2f2f2f;

  /* Green */
  --color-green: #54cb56;
  --color-green-50: #f0fbf0;
  --color-green-100: #dcf5dd;
  --color-green-200: #baeabb;
  --color-green-300: #97df99;
  --color-green-400: #75d477;
  --color-green-500: #54cb56;
  --color-green-600: #3fb842;
  --color-green-700: #339936;
  --color-green-800: #287a2a;
  --color-green-900: #1f5b21;
  --color-green-950: #0f2e10;

  /* Purple (Main Accent) */
  --color-purple: #9771ff;
  --color-purple-50: #f5f3ff;
  --color-purple-100: #ede8ff;
  --color-purple-200: #ddd4ff;
  --color-purple-300: #c4b0ff;
  --color-purple-400: #a888ff;
  --color-purple-500: #9771ff;
  --color-purple-600: #7c4fff;
  --color-purple-700: #6939eb;
  --color-purple-800: #5730c7;
  --color-purple-900: #472aa3;
  --color-purple-950: #2d1971;

  /* Yellow */
  --color-yellow: #f0ba2c;
  --color-yellow-50: #fefaec;
  --color-yellow-100: #fdf2ca;
  --color-yellow-200: #fbe798;
  --color-yellow-300: #f7d55c;
  --color-yellow-400: #f4c744;
  --color-yellow-500: #f0ba2c;
  --color-yellow-600: #e09a14;
  --color-yellow-700: #bb7714;
  --color-yellow-800: #975b17;
  --color-yellow-900: #7b4a17;
  --color-yellow-950: #462608;

  /* Red */
  --color-red: #fe6d66;
  --color-red-50: #fff0ef;
  --color-red-100: #ffdddb;
  --color-red-200: #ffc1bd;
  --color-red-300: #ff998f;
  --color-red-400: #ff8078;
  --color-red-500: #fe6d66;
  --color-red-600: #fc3b31;
  --color-red-700: #e72218;
  --color-red-800: #c01c15;
  --color-red-900: #9e1d18;
  --color-red-950: #560907;

  /* Blue */
  --color-blue: #345fd8;
  --color-blue-50: #f0f5ff;
  --color-blue-100: #e0eaff;
  --color-blue-200: #bad4ff;
  --color-blue-300: #85b3ff;
  --color-blue-400: #4d8fff;
  --color-blue-500: #345fd8;
  --color-blue-600: #2448d1;
  --color-blue-700: #1936b8;
  --color-blue-800: #182e96;
  --color-blue-900: #192b78;
  --color-blue-950: #121c49;
}

/* Dark mode CSS variables */
[data-theme='dark'] {
  /* Active nav item colors for dark mode */
  --nav-active-bg: #4dc7ba33;
  --nav-active-text: #6cd3c9;

  /* Dark mode color scheme */
  color-scheme: dark;

  /* Core dark mode colors */
  
  /* New dark mode background colors */
  --dark-graybg: rgba(98, 97, 95, 0.1);      /* Gray background with 10% opacity */
  --dark-lightgraybg: rgba(74, 73, 72, 0.4); /* Light gray background with 40% opacity */

  /* Override layout colors for dark mode */
  --border-gray: #62615f;
  --border-app: rgba(98, 97, 95, 0.3);
  --color-text-input-bg: #242323;

  /* Override main color palette for dark mode */
  --color-black: #dddcd9; /* Text color in dark mode */
  --color-black-50: #191818;
  --color-black-100: #1f1e1e;
  --color-black-200: #262525;
  --color-black-300: #333231;
  --color-black-400: #4a4948;
  --color-black-500: #62615f;
  --color-black-600: #7a7977;
  --color-black-700: #949391;
  --color-black-800: #b8b7b6;
  --color-black-900: #dddcd9;
  --color-black-950: #f0efed;

  /* White (inverted for dark mode) */
  --color-white: #191818;
  --color-white-pure: #191818;
  --color-white-50: #191818;
  --color-white-100: #1f1e1e;
  --color-white-200: #242323;
  --color-white-300: #2a2928;
  --color-white-400: #302f2e;
  --color-white-500: #363534;
  --color-white-600: #3c3b3a;
  --color-white-700: #424140;
  --color-white-800: #484746;
  --color-white-900: #4e4d4c;

  /* Light Gray (adjusted for dark mode) */
  --color-light-gray: #2a2928;
  --color-light-gray-50: #191818;
  --color-light-gray-100: #1f1e1e;
  --color-light-gray-200: #242323;
  --color-light-gray-300: #2a2928;
  --color-light-gray-400: #302f2e;
  --color-light-gray-500: #363534;
  --color-light-gray-600: #3c3b3a;
  --color-light-gray-700: #424140;
  --color-light-gray-800: #484746;
  --color-light-gray-900: #4e4d4c;

  /* Gray (adjusted for dark mode) */
  --color-gray: #62615f;
  --color-gray-50: #1f1e1e;
  --color-gray-100: #242323;
  --color-gray-200: #2a2928;
  --color-gray-300: #363534;
  --color-gray-400: #424140;
  --color-gray-500: #4e4d4c;
  --color-gray-600: #5a5957;
  --color-gray-700: #666563;
  --color-gray-800: #72716f;
  --color-gray-900: #7e7d7b;

  /* Dark Gray (adjusted for dark mode) */
  --color-dark-gray: #949391;
  --color-dark-gray-50: #363534;
  --color-dark-gray-100: #424140;
  --color-dark-gray-200: #4e4d4c;
  --color-dark-gray-300: #5a5957;
  --color-dark-gray-400: #666563;
  --color-dark-gray-500: #72716f;
  --color-dark-gray-600: #7e7d7b;
  --color-dark-gray-700: #8a8987;
  --color-dark-gray-800: #969593;
  --color-dark-gray-900: #a2a19f;

  /* Green (adjusted for dark mode - using accent color) */
  --color-green: #34968b;
  --color-green-50: #0a1f1d;
  --color-green-100: #143e39;
  --color-green-200: #1e5d56;
  --color-green-300: #287c73;
  --color-green-400: #34968b;
  --color-green-500: #40b0a3;
  --color-green-600: #55c0b4;
  --color-green-700: #6ad0c5;
  --color-green-800: #7fe0d6;
  --color-green-900: #94f0e7;
  --color-green-950: #a9fff8;

  /* Purple (slightly adjusted for dark mode) */
  --color-purple: #a888ff;
  --color-purple-50: #1a0f3d;
  --color-purple-100: #2d1971;
  --color-purple-200: #3f23a5;
  --color-purple-300: #5730c7;
  --color-purple-400: #6939eb;
  --color-purple-500: #7c4fff;
  --color-purple-600: #9771ff;
  --color-purple-700: #a888ff;
  --color-purple-800: #c4b0ff;
  --color-purple-900: #ddd4ff;
  --color-purple-950: #f5f3ff;

  /* Keep other accent colors similar but slightly adjusted for dark mode visibility */
  --color-yellow: #f4c744;
  --color-red: #ff8078;
  --color-blue: #4d8fff;

  /* Box shadows for dark mode */
  --shadow-primary:
    0px 2px 8px rgba(0, 0, 0, 0.4), 0px 1px 4px rgba(0, 0, 0, 0.3);
  --shadow-popup: 0 2px 8px 0 rgb(0 0 0 / 0.3), 0 1px 4px -1px rgb(0 0 0 / 0.2);
}

/* Dark mode specific utility classes */
[data-theme='dark'] .page-bg {
  background: linear-gradient(
    180deg,
    hsla(0, 0%, 100%, 0.03) 0%,
    hsla(0, 0%, 100%, 0.028) 8.1%,
    hsla(0, 0%, 100%, 0.025) 15.5%,
    hsla(0, 0%, 100%, 0.022) 22.5%,
    hsla(0, 0%, 100%, 0.018) 29%,
    hsla(0, 0%, 100%, 0.015) 35.3%,
    hsla(0, 0%, 100%, 0.012) 41.2%,
    hsla(0, 0%, 100%, 0.009) 47.1%,
    hsla(0, 0%, 100%, 0.007) 52.9%,
    hsla(0, 0%, 100%, 0.005) 58.8%,
    hsla(0, 0%, 100%, 0.003) 64.7%,
    hsla(0, 0%, 100%, 0.002) 71%,
    hsla(0, 0%, 100%, 0.001) 77.5%,
    hsla(0, 0%, 100%, 0) 84.5%
  );
}

/* Light mode page background */
[data-theme='light'] .page-bg,
:root:not([data-theme='dark']) .page-bg {
  background: linear-gradient(
    360deg,
    rgb(255 255 255 / 50%) 0%,
    rgb(255 255 255 / 52%) 8.1%,
    rgb(255 255 255 / 54%) 15.5%,
    rgb(255 255 255 / 57%) 22.5%,
    rgb(255 255 255 / 60%) 29%,
    rgb(255 255 255 / 64%) 35.3%,
    rgb(255 255 255 / 68%) 41.2%,
    rgb(255 255 255 / 73%) 47.1%,
    rgb(255 255 255 / 78%) 52.9%,
    rgb(255 255 255 / 83%) 58.8%,
    rgb(255 255 255 / 88%) 64.7%,
    rgb(255 255 255 / 92%) 71%,
    rgb(255 255 255 / 96%) 77.5%,
    rgb(255 255 255 / 99%) 84.5%,
    hsl(0deg 0% 100%) 100%
  );
}

/* Dark mode card backgrounds with transparent whites */
[data-theme='dark'] .card-bg {
  background-color: rgba(255, 255, 255, 0.03);
}

[data-theme='dark'] .card-bg-hover:hover {
  background-color: rgba(255, 255, 255, 0.05);
}

/* Dark mode base styles - only for body and root elements */
[data-theme='dark'] body {
  background-color: var(--dark-bg);
  color: var(--dark-text);
}

/* Dark mode shadow adjustments for inputs and interactive elements */
/* Use :where() to reduce specificity, allowing utility classes to override */
:where([data-theme='dark'] input),
:where([data-theme='dark'] textarea),
:where([data-theme='dark'] select) {
  background-color: var(--color-text-input-bg);
  border-color: var(--dark-border);
  color: var(--dark-text);
}

/* Allow transparent background when explicitly set */
[data-theme='dark'] input.bg-transparent,
[data-theme='dark'] textarea.bg-transparent,
[data-theme='dark'] select.bg-transparent {
  background-color: transparent !important;
}

/* Also support light mode transparent inputs */
input.bg-transparent,
textarea.bg-transparent,
select.bg-transparent {
  background-color: transparent !important;
}

/* Custom input variants - these will override the defaults */
.input-filled {
  background-color: var(--color-light-gray-200) !important;
}

[data-theme='dark'] .input-filled {
  background-color: var(--color-gray-800) !important;
}

.input-elevated {
  background-color: var(--color-white-pure) !important;
}

[data-theme='dark'] .input-elevated {
  background-color: var(--color-white-400) !important;
}

.input-accent {
  background-color: var(--color-green-50) !important;
}

[data-theme='dark'] .input-accent {
  background-color: rgba(52, 150, 139, 0.1) !important;
}

[data-theme='dark'] input:focus,
[data-theme='dark'] textarea:focus,
[data-theme='dark'] select:focus {
  /* Keep empty for now */
}

/* Removed hardcoded dark mode overrides - use Tailwind's dark: utilities instead */
/* Example: text-gray-800 dark:text-dark-heading */
/* Example: bg-white dark:bg-dark-card */
/* Example: border-gray-200 dark:border-dark-border */

/* Dark mode dropdown and popup backgrounds */
[data-theme='dark'] .shadow-popup {
  box-shadow: var(--shadow-popup);
}

[data-theme='dark'] .dropdown-animation {
  background-color: var(--color-white-300);
}

/* Dark mode button states */
[data-theme='dark'] .bg-app-green-100 {
  background-color: rgba(52, 150, 139, 0.15);
}

[data-theme='dark'] .text-app-green {
  color: var(--dark-accent);
}

[data-theme='dark'] .hover\:bg-app-green-700:hover {
  background-color: rgba(52, 150, 139, 0.8);
}

/* Dark mode slider adjustments */
[data-theme='dark'] .slider-light::-webkit-slider-track {
  background: var(--color-gray-600);
}

[data-theme='dark'] .slider-light::-moz-range-track {
  background: var(--color-gray-600);
}

[data-theme='dark'] .slider-light::-webkit-slider-thumb {
  background: var(--color-gray-300);
  border-color: var(--color-gray-500);
}

[data-theme='dark'] .slider-light::-moz-range-thumb {
  background: var(--color-gray-300);
  border-color: var(--color-gray-500);
}

/* Hide number input spinners */
/* Chrome, Safari, Edge, Opera */
input[type='number']::-webkit-outer-spin-button,
input[type='number']::-webkit-inner-spin-button {
  -webkit-appearance: none;
  margin: 0;
}

/* Firefox */
input[type='number'] {
  -moz-appearance: textfield;
}

/* Typography Utility Classes */
@layer utilities {
  /* Heading Styles - Using Martina Plantijn */
  .text-h1 {
    font-family: var(--font-heading);
    font-size: var(--text-h1);
    font-weight: var(--font-light);
    line-height: var(--leading-heading);
    letter-spacing: var(--tracking-heading);
  }

  .text-h2 {
    font-family: var(--font-heading);
    font-size: var(--text-h2);
    font-weight: var(--font-light);
    line-height: var(--leading-heading);
    letter-spacing: var(--tracking-heading);
  }

  .text-h3 {
    font-family: var(--font-heading);
    font-size: var(--text-h3);
    font-weight: var(--font-light);
    line-height: var(--leading-heading);
    letter-spacing: var(--tracking-heading);
  }

  .text-h4 {
    font-family: var(--font-heading);
    font-size: var(--text-h4);
    font-weight: var(--font-light);
    line-height: var(--leading-heading);
    letter-spacing: var(--tracking-heading);
  }

  .text-h5 {
    font-family: var(--font-heading);
    font-size: var(--text-h5);
    font-weight: var(--font-light);
    line-height: var(--leading-heading);
    letter-spacing: var(--tracking-heading);
  }

  .text-h6 {
    font-family: var(--font-heading);
    font-size: var(--text-h6);
    font-weight: var(--font-light);
    line-height: var(--leading-heading);
    letter-spacing: var(--tracking-heading);
  }

  /* Body Text Styles - Using Inter */
  .text-body-large {
    font-family: var(--font-body);
    font-size: var(--text-body-lg);
    font-weight: var(--font-regular);
    line-height: var(--leading-body);
    letter-spacing: var(--tracking-body);
  }

  .text-body {
    font-family: var(--font-body);
    font-size: var(--text-body);
    font-weight: var(--font-regular);
    line-height: var(--leading-body);
    letter-spacing: var(--tracking-body);
  }

  .text-body-small {
    font-family: var(--font-body);
    font-size: var(--text-body-sm);
    font-weight: var(--font-regular);
    line-height: var(--leading-body);
    letter-spacing: var(--tracking-body);
  }

  .text-caption {
    font-family: var(--font-body);
    font-size: var(--text-caption);
    font-weight: var(--font-regular);
    line-height: var(--leading-body);
    letter-spacing: var(--tracking-body);
  }

  .text-micro {
    font-family: var(--font-body);
    font-size: var(--text-micro);
    font-weight: var(--font-regular);
    line-height: var(--leading-body);
    letter-spacing: var(--tracking-wide);
  }

  /* UI-specific text (buttons, labels, menu items) - Using Inter */
  .text-button {
    font-family: var(--font-body);
    font-size: var(--text-body-sm);
    font-weight: var(--font-medium);
    line-height: 1;
    letter-spacing: var(--tracking-wide);
  }

  .text-label {
    font-family: var(--font-body);
    font-size: var(--text-caption);
    font-weight: var(--font-medium);
    line-height: 1;
    letter-spacing: var(--tracking-wide);
    text-transform: uppercase;
  }

  .text-menu {
    font-family: var(--font-body);
    font-size: var(--text-body-sm);
    /* font-weight removed to allow utilities like font-bold to work */
    line-height: var(--leading-body);
  }

  /* Weight modifiers for body text */
  .font-light {
    font-weight: var(--font-light);
  }
  .font-regular {
    font-weight: var(--font-regular);
  }
  .font-medium {
    font-weight: var(--font-medium);
  }
  .font-semibold {
    font-weight: var(--font-semibold);
  }
  .font-bold {
    font-weight: var(--font-bold);
  }

  /* Responsive Typography (Mobile) */
  @media (max-width: 768px) {
    .text-h1 {
      font-size: 2rem;
    } /* 32px on mobile */
    .text-h2 {
      font-size: 1.75rem;
    } /* 28px on mobile */
    .text-h3 {
      font-size: 1.375rem;
    } /* 22px on mobile */
    .text-h4 {
      font-size: 1.125rem;
    } /* 18px on mobile */
    .text-h5 {
      font-size: 1rem;
    } /* 16px on mobile */
    .text-h6 {
      font-size: 0.875rem;
    } /* 14px on mobile */
  }
}

@layer base {
  html {
    @apply antialiased;
    font-family: var(--font-body);
  }

  body {
    @apply bg-app-white text-app-black;
    font-family: var(--font-body);
    font-size: var(--text-body);
    line-height: var(--leading-body);
  }

  /* Apply heading font to all heading elements by default */
  h1 {
    @apply text-h1;
  }
  h2 {
    @apply text-h2;
  }
  h3 {
    @apply text-h3;
  }
  h4 {
    @apply text-h4;
  }
  h5 {
    @apply text-h5;
  }
  h6 {
    @apply text-h6;
  }

  /* Apply body font to text elements */
  p {
    font-family: var(--font-body);
    line-height: var(--leading-body);
  }

  /* Form elements */
  label {
    @apply text-label;
  }
  input,
  textarea,
  select {
    font-family: var(--font-body);
  }
  button {
    @apply text-button;
  }
}

@layer components {
  .slide-canvas {
    @apply w-full h-full bg-app-white-pure shadow-lg rounded-lg;
  }
}

/* Custom range slider styles for Figma-like appearance */
.slider {
  -webkit-appearance: none;
  width: 100%;
  background: transparent;
  outline: none;
}

.slider::-webkit-slider-track {
  width: 100%;
  height: 2px;
  background: var(--color-dark-gray-700);
  border-radius: 1px;
}

.slider::-webkit-slider-thumb {
  -webkit-appearance: none;
  appearance: none;
  width: 12px;
  height: 12px;
  background: var(--color-white-pure);
  border: 2px solid var(--color-black-800);
  border-radius: 50%;
  cursor: pointer;
  margin-top: -5px;
}

.slider::-moz-range-track {
  width: 100%;
  height: 2px;
  background: var(--color-dark-gray-700);
  border-radius: 1px;
}

.slider::-moz-range-thumb {
  width: 12px;
  height: 12px;
  background: var(--color-white-pure);
  border: 2px solid var(--color-black-800);
  border-radius: 50%;
  cursor: pointer;
  border: none;
}

/* Hover states */
.slider:hover::-webkit-slider-thumb {
  background: var(--color-white-100);
}

.slider:hover::-moz-range-thumb {
  background: var(--color-white-100);
}

/* Light theme slider */
.slider-light {
  -webkit-appearance: none;
  width: 100%;
  height: 4px;
  background: var(--color-light-gray-500);
  border-radius: 2px;
  outline: none;
  position: relative;
}

/* Webkit browsers (Chrome, Safari) */
.slider-light::-webkit-slider-track {
  width: 100%;
  height: 4px;
  background: var(--color-light-gray-500);
  border-radius: 2px;
}

.slider-light::-webkit-slider-thumb {
  -webkit-appearance: none;
  appearance: none;
  width: 16px;
  height: 16px;
  background: var(--color-white-pure);
  border: 1px solid var(--color-gray-400);
  border-radius: 50%;
  cursor: pointer;
  box-shadow:
    0 1px 3px rgba(0, 0, 0, 0.1),
    0 1px 2px rgba(0, 0, 0, 0.06);
  transition: all 0ms ease;
}

/* Firefox */
.slider-light::-moz-range-track {
  width: 100%;
  height: 4px;
  background: var(--color-light-gray-500);
  border-radius: 2px;
  border: none;
}

.slider-light::-moz-range-thumb {
  width: 16px;
  height: 16px;
  background: var(--color-white-pure);
  border: 1px solid var(--color-gray-400);
  border-radius: 50%;
  cursor: pointer;
  box-shadow:
    0 1px 3px rgba(0, 0, 0, 0.1),
    0 1px 2px rgba(0, 0, 0, 0.06);
  transition: all 0ms ease;
  border-style: solid;
}

/* Edge and IE */
.slider-light::-ms-track {
  width: 100%;
  height: 4px;
  background: transparent;
  border-color: transparent;
  color: transparent;
}

.slider-light::-ms-fill-lower {
  background: var(--color-light-gray-500);
  border-radius: 2px;
}

.slider-light::-ms-fill-upper {
  background: var(--color-light-gray-500);
  border-radius: 2px;
}

.slider-light::-ms-thumb {
  width: 16px;
  height: 16px;
  background: var(--color-white-pure);
  border: 1px solid var(--color-gray-400);
  border-radius: 50%;
  cursor: pointer;
  box-shadow:
    0 1px 3px rgba(0, 0, 0, 0.1),
    0 1px 2px rgba(0, 0, 0, 0.06);
  margin-top: 0;
}

/* Light theme hover states */
.slider-light:hover::-webkit-slider-thumb {
  border-color: var(--color-dark-gray-400);
  box-shadow:
    0 2px 4px rgba(0, 0, 0, 0.1),
    0 1px 2px rgba(0, 0, 0, 0.06);
}

.slider-light:hover::-moz-range-thumb {
  border-color: var(--color-dark-gray-400);
  box-shadow:
    0 2px 4px rgba(0, 0, 0, 0.1),
    0 1px 2px rgba(0, 0, 0, 0.06);
}

.slider-light:hover::-ms-thumb {
  border-color: var(--color-dark-gray-400);
  box-shadow:
    0 2px 4px rgba(0, 0, 0, 0.1),
    0 1px 2px rgba(0, 0, 0, 0.06);
}

/* Active/dragging state */
.slider-light:active::-webkit-slider-thumb {
  background: var(--color-white-600);
  border-color: var(--color-dark-gray-600);
  transform: scale(0.95);
}

.slider-light:active::-moz-range-thumb {
  background: var(--color-white-600);
  border-color: var(--color-dark-gray-600);
  transform: scale(0.95);
}

.slider-light:active::-ms-thumb {
  background: var(--color-white-600);
  border-color: var(--color-dark-gray-600);
  transform: scale(0.95);
}

/* Focus states for accessibility */
.slider-light:focus {
  outline: none;
}

.slider-light:focus::-webkit-slider-thumb {
  border-color: var(--color-blue-500);
  box-shadow: 0 0 0 3px rgba(52, 95, 216, 0.1);
}

.slider-light:focus::-moz-range-thumb {
  border-color: var(--color-blue-500);
  box-shadow: 0 0 0 3px rgba(52, 95, 216, 0.1);
}

/* Gradient Color Picker Styles */
.gradient-picker-wrapper {
  width: 100%;
}

.gradient-picker-wrapper .react-colorful {
  width: 100% !important;
  height: auto !important;
}

.gradient-picker-wrapper .react-colorful__saturation {
  border-radius: 6px 6px 0 0;
  width: 100% !important;
  height: 150px !important;
}

.gradient-picker-wrapper .react-colorful__hue {
  margin: 8px 0;
  height: 12px !important;
  border-radius: 6px;
}

.gradient-picker-wrapper .react-colorful__alpha {
  height: 12px !important;
  border-radius: 6px;
}

.gradient-picker-wrapper .react-colorful__pointer {
  width: 14px !important;
  height: 14px !important;
}

.gradient-picker-wrapper .react-colorful__hue-pointer,
.gradient-picker-wrapper .react-colorful__alpha-pointer {
  width: 16px !important;
  height: 16px !important;
}

/* Prevent text selection during drag */
.dragging-gradient-stop {
  user-select: none !important;
  -webkit-user-select: none !important;
  -moz-user-select: none !important;
  -ms-user-select: none !important;
}

/* Canvas and editor specific styles */
.konvajs-content {
  outline: none !important;
}

/* Cursor styles for canvas pan mode */
[style*='cursor: grab'] {
  cursor: -webkit-grab !important;
  cursor: -moz-grab !important;
  cursor: grab !important;
}

[style*='cursor: grabbing'] {
  cursor: -webkit-grabbing !important;
  cursor: -moz-grabbing !important;
  cursor: grabbing !important;
}

/* Blend mode preview styles */
.blend-mode-preview {
  isolation: isolate;
}

/* Color picker magnifying glass styles */
.color-picker-magnifier {
  image-rendering: pixelated;
  image-rendering: -moz-crisp-edges;
  image-rendering: crisp-edges;
}

/* Crosshair cursor during color picking */
body.color-picking,
body.color-picking * {
  cursor: crosshair !important;
}

/* Smooth transitions for color picker UI */
.color-picker-container {
  transition: opacity 0.2s ease;
}

/* Ensure canvas is accessible for color picking */
.konvajs-content canvas {
  pointer-events: auto !important;
}

/* Disabled select option styles */
select option:disabled {
  color: #e5e7eb; /* Light gray text */
  cursor: not-allowed;
}

/* For Firefox */
select option[disabled] {
  color: #e5e7eb; /* Light gray text */
}

/* Separate color/background transitions from transform transitions */
@layer utilities {
  /* Instant color/background transitions */
  .transition-colors {
    transition-property:
      color, background-color, border-color, text-decoration-color, fill, stroke !important;
    transition-timing-function: cubic-bezier(0.4, 0, 0.2, 1) !important;
    transition-duration: 0ms !important;
  }

  /* Transform transitions with 100ms duration */
  .transition-transform {
    transition-property: transform !important;
    transition-timing-function: cubic-bezier(0.4, 0, 0.2, 1) !important;
    transition-duration: 100ms !important;
  }

  /* Shadow transitions instant */
  .transition-shadow {
    transition-property: box-shadow !important;
    transition-timing-function: cubic-bezier(0.4, 0, 0.2, 1) !important;
    transition-duration: 0ms !important;
  }

  /* Opacity transitions instant */
  .transition-opacity {
    transition-property: opacity !important;
    transition-timing-function: cubic-bezier(0.4, 0, 0.2, 1) !important;
    transition-duration: 0ms !important;
  }

  /* Mixed transition-all class: instant colors, smooth transforms */
  .transition-all {
    transition-property: all !important;
    transition-timing-function: cubic-bezier(0.4, 0, 0.2, 1) !important;
    transition-duration: 100ms !important;
  }

  /* Specific property transitions */
  .transition-all {
    transition:
      color 0ms cubic-bezier(0.4, 0, 0.2, 1),
      background-color 0ms cubic-bezier(0.4, 0, 0.2, 1),
      border-color 0ms cubic-bezier(0.4, 0, 0.2, 1),
      text-decoration-color 0ms cubic-bezier(0.4, 0, 0.2, 1),
      fill 0ms cubic-bezier(0.4, 0, 0.2, 1),
      stroke 0ms cubic-bezier(0.4, 0, 0.2, 1),
      opacity 0ms cubic-bezier(0.4, 0, 0.2, 1),
      box-shadow 0ms cubic-bezier(0.4, 0, 0.2, 1),
      transform 100ms cubic-bezier(0.4, 0, 0.2, 1),
      width 100ms cubic-bezier(0.4, 0, 0.2, 1),
      height 100ms cubic-bezier(0.4, 0, 0.2, 1),
      padding 100ms cubic-bezier(0.4, 0, 0.2, 1),
      margin 100ms cubic-bezier(0.4, 0, 0.2, 1),
      font-size 100ms cubic-bezier(0.4, 0, 0.2, 1),
      scale 100ms cubic-bezier(0.4, 0, 0.2, 1) !important;
  }

  /* New utility classes for common combinations */
  .transition-colors-transform {
    transition:
      color 0ms cubic-bezier(0.4, 0, 0.2, 1),
      background-color 0ms cubic-bezier(0.4, 0, 0.2, 1),
      border-color 0ms cubic-bezier(0.4, 0, 0.2, 1),
      transform 100ms cubic-bezier(0.4, 0, 0.2, 1) !important;
  }

  .transition-colors-scale {
    transition:
      color 0ms cubic-bezier(0.4, 0, 0.2, 1),
      background-color 0ms cubic-bezier(0.4, 0, 0.2, 1),
      border-color 0ms cubic-bezier(0.4, 0, 0.2, 1),
      scale 100ms cubic-bezier(0.4, 0, 0.2, 1) !important;
  }
}

/* Sidebar specific animations */
@keyframes animate-in {
  from {
    opacity: 0;
    transform: translateY(-4px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

.animate-in {
  animation: animate-in 0.2s ease-out;
}

/* Fade in animations for dashboard */
@keyframes fade-in-delay {
  from {
    opacity: 0;
    transform: translateY(10px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

.animate-fade-in-delay-1 {
  animation: fade-in-delay 0.5s ease-out forwards;
  animation-delay: 0.1s;
}

/* Greeting animation: blur + fade + move up */
@keyframes greeting-entrance {
  from {
    opacity: 0;
    filter: blur(8px);
    transform: translateY(20px);
  }
  to {
    opacity: 1;
    filter: blur(0px);
    transform: translateY(0);
  }
}

/* Subtitle animation: blur + fade only (no vertical movement) */
@keyframes subtitle-entrance {
  from {
    opacity: 0;
    filter: blur(6px);
  }
  to {
    opacity: 1;
    filter: blur(0px);
  }
}

/* Animation classes with staggered timing */
.animate-greeting {
  animation: greeting-entrance 0.8s cubic-bezier(0.16, 1, 0.3, 1) forwards;
  opacity: 0; /* Start invisible */
}

.animate-subtitle {
  animation: subtitle-entrance 0.7s cubic-bezier(0.16, 1, 0.3, 1) forwards;
  animation-delay: 0.3s; /* Start after greeting begins */
  opacity: 0; /* Start invisible */
}

/* Quick fade-in animation for immediate content */
@keyframes quick-fade-in {
  from {
    opacity: 0;
  }
  to {
    opacity: 1;
  }
}

.animate-fade-in {
  animation: quick-fade-in 0.3s ease-out forwards;
}

/* Dropdown animation for user menu */
@keyframes dropdown-slide-in {
  from {
    opacity: 0;
    transform: translateY(8px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

.dropdown-animation {
  animation: dropdown-slide-in 0.15s ease-out;
}

.nav-item-active {
  background-color: #f6f6f6;
  color: #0d9488;
}

/* Line clamp utility for text truncation */
.line-clamp-2 {
  display: -webkit-box;
  -webkit-line-clamp: 2;
  -webkit-box-orient: vertical;
  overflow: hidden;
  text-overflow: ellipsis;
}

/* Language-specific font adjustments */
:lang(ja) {
  font-family:
    'Noto Sans JP', 'Hiragino Kaku Gothic ProN', 'Hiragino Sans', Meiryo,
    var(--font-body);
}

:lang(zh) {
  font-family:
    'Noto Sans SC', 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei',
    'WenQuanYi Micro Hei', var(--font-body);
}

/* Adjust line height for better CJK readability */
:lang(ja),
:lang(zh) {
  line-height: 1.6;
}

/* Ensure proper text rendering for CJK languages */
:lang(ja),
:lang(zh) {
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
  text-rendering: optimizeLegibility;
}

/* CJK-specific class for better rendering when language is detected */
.cjk-lang {
  font-family:
    'Noto Sans SC', 'Noto Sans JP', 'PingFang SC', 'Hiragino Sans GB',
    'Microsoft YaHei', var(--font-body);
  line-height: 1.6;
}

/* Override heading font weights for CJK languages to ensure proper rendering */
/* Note: StyledGreeting component handles this with inline styles for mixed language support */
.cjk-lang .text-h1:not(.styled-greeting),
.cjk-lang .text-h2:not(.styled-greeting),
.cjk-lang .text-h3:not(.styled-greeting),
.cjk-lang .text-h4:not(.styled-greeting),
.cjk-lang .text-h5:not(.styled-greeting),
.cjk-lang .text-h6:not(.styled-greeting) {
  font-weight: var(
    --font-regular
  ) !important; /* 400 - regular weight for CJK */
  font-family:
    'Noto Sans SC', 'Noto Sans JP', 'PingFang SC', 'Hiragino Sans GB',
    'Microsoft YaHei', var(--font-body);
}

/* Specific language overrides */
:lang(ja) .text-h1:not(.styled-greeting),
:lang(ja) .text-h2:not(.styled-greeting),
:lang(ja) .text-h3:not(.styled-greeting),
:lang(ja) .text-h4:not(.styled-greeting),
:lang(ja) .text-h5:not(.styled-greeting),
:lang(ja) .text-h6:not(.styled-greeting),
:lang(zh) .text-h1:not(.styled-greeting),
:lang(zh) .text-h2:not(.styled-greeting),
:lang(zh) .text-h3:not(.styled-greeting),
:lang(zh) .text-h4:not(.styled-greeting),
:lang(zh) .text-h5:not(.styled-greeting),
:lang(zh) .text-h6:not(.styled-greeting) {
  font-weight: var(
    --font-regular
  ) !important; /* 400 - regular weight for CJK */
}
